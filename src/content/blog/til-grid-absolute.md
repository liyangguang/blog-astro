---
title: absolute position in grid
pubDate: 2025-02-02
tags:
  - CSS
isTil: true
---

## The setup

Consider a simple CSS grid.

```html
<main>
  <div>1</div>
  <div>2</div>
  <div>3</div>
  <div>4</div>
  <div>5</div>
  <div>6</div>
  <div>7</div>
  <div class="exampleA">A</div>
  <div class="exampleB">B</div>
</main>
```

```css
main {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
}
```

Now you want to put the "example 1" to the top-left of the grid. So you add:

```css
main {
  position: relative;
}

.exampleA {
  position: absolute;
  left: 0;
  top: 0;
}
```

It works as expected.

## The "weird" case

But, if you have `grid-column / grid-row` on the grid cell element, it behaves differently!

e.g.

```css
.exampleB {
  /* Same as example A */
  position: absolute;
  left: 0;
  top: 0;
  /* If it happen to also have these. */
  grid-column: 2/3;
  grid-row: 2/3;
}
```

<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="poYyZeb" data-pen-title="Absolute position with grid" data-user="liyangguang" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/liyangguang/pen/poYyZeb">
  Absolute position with grid</a> by Yangguang Li (<a href="https://codepen.io/liyangguang">@liyangguang</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://public.codepenassets.com/embed/index.js"></script>

![grid-position-example-1](@assets/til/grid-absolute.png)


You can see that `B`'s position is based on the grid cell, not the grid!

## Why?

If you read [MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/position#absolute) documentation, there's no mentioning of this behavior:

> The element is positioned relative to its closest positioned ancestor (if any) or to the initial containing block 

But I found this piece of detail in the [spec](https://www.w3.org/TR/css-position-3/#original-cb)

> Some features can alter the effective containing block rectangle of absolutely positioned boxes. ... the grid-placement properties on an absolutely positioned box whose containing block is generated by a grid container can change the containing block rectangle to a specified grid area.

## One more detail

Note the usage of `grid-column: 2/3;`, not `grid-column: 2;`. If using the latter (only setting the left grid edge, not the right end), setting `right` will still based on the grid container, not the cell. It's same for `grid-rows` and `bottom`.
